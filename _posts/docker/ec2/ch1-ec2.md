# EC2 서버구축하기

AWS는 처음 시작할때 아찔할 정도로 뭘 해야할지 벙한상태가 됩니다. 특히 독학하는 입장에서는 더욱 그렇조. 하지만 구글과 유투브의 도움으로 여차여차 배움을 이어나가 볼게요.   
  
일단 AWS에서는 인스턴스를 만들고 만들지 않고의 차이가 꽤 크다고 합니다. 즉 하나의 인스턴스\(한대의 서버\)를 만들면 스스로 EC2 생성을 추후에도 무리없이 할 수 있어요.  

AWS 콘솔 페이지로 가주세요.    

![](../../.gitbook/assets/image%20%28110%29.png)

  
우측 상단에 보면 지역명이 보일거에요. 미국 북부 버지니아가 보일텐데요. 서울로 설정해주세요.   
왜냐하면 각 지역마다 보이는 화면 페이지가 완전히 다를수 있기 때문입니다. 즉 지역마다 인스턴스가 별도로 생성하고 관리되기때문에 미국지역에다가 이전에 인스턴스 만들다가 지역 설정을 한국에 해놓고 인스턴스를 다시 만드는 오류를 만들수 있어요.   
  
잘모해서 과금폭탄 뚜드러 맞을수 있으니 유의하세요.   
그만큼 중요합니다. 또한 수시로 '내 결제 대시보드'에서 본인 모르게 과금되는건 아닌지 check해주세요.   
  
만약 이것 저것 신나서 만지거나 혹은 실수로 했다간 현업에서 욕 박살나게 먹고 혹은 학생신분에서 깡통찰 수 있습니다.   
\(유투브 채널의 동빈나님이 3천만원 과금뚜드러 맞은적이 있다고하네요.\)  
  
서론이 길었네요.   
  
다시 한번 언급하자면, \_\_인스턴스는 서버 컴퓨터 그 자체\_\_에요.  
이제 나만의 새로운 리눅스 서버를 만들고 싶다면  시작버튼을 눌러 주면 되요.   


![OS&#xBCC4; &#xC11C;&#xBC84;&#xC120;&#xD0DD;](../../.gitbook/assets/.jpg.jpeg)

이렇게 여려 OS를 옵션이 있어요.   
우리는 ubuntu server 18.04를 선택할건데요. 윈도우 64비트가 대부분이시니 그 부분 체크하시고 시작해주세요.   
  


![&#xC778;&#xC2A4;&#xD134;&#xC2A4; &#xC720;&#xD615;&#xC120;&#xD0DD;](../../.gitbook/assets/image%20%2836%29.png)

초록색으로 된 부분 보이시조? 프리티어 사용가능이라는 부분을 선택해서 진행할게요. CPU 메모리가 허접하다라고 생각할지 모르지만 일반적인 학습용도나 기본적인 것들은 저정도 사양이면 충분하다고 하네요   
  


![&#xBCF4;&#xC548;&#xADF8;&#xB8F9;&#xACFC; &#xC138;&#xBD80;&#xC815;&#xBCF4; &#xC0AC;&#xD56D;](../../.gitbook/assets/image%20%2850%29.png)

보안 그룹과 세부 정보등은 추후에 알아볼게요. 일단 Pass   
  
다음 시작하기 버튼을 눌러주세요.   
  
  


![&#xD398;&#xC5B4;&#xC120;&#xD0DD; &#xBC0F; &#xC0DD;&#xC131;&#xD654;&#xBA74; ](../../.gitbook/assets/image%20%2896%29.png)

말 글대로 기존 키 페어를 선택하거나 새로운 페어를 만드는거에요. 일반적으로 우리가 생각하는 비밀번호를 통해 인증하는것이 아닌.   
 페어라는 파일로 아마존에 인증해서 EC2에 접속 할 수 있어요.   
 다른 사람이 나의 페어를 갖고 접속될수 있다면 나의 서버가 털릴수 있으니 본인의 페어를 공공장소\(깃허브, 드라이브\)에 두지 마세요.   
  
다음 키 페어 다운로드를 하시면되요. \(아무곳이나 두지마시고 별도의 폴더에 두세요. 까먹고 지울수 있어요.\)  
  
다시 EC2 대시보드로 돌아오시면 아래와 같이 실행중인 인스턴스가 1로 변한걸 볼 수 있어요.   
  
 

![&#xC778;&#xC2A4;&#xD134;&#xC2A4;&#xAC00; &#xC0DD;&#xC131;&#xB41C; &#xB300;&#xC2DC;&#xBCF4;&#xB4DC;&#xD654;&#xBA74;](../../.gitbook/assets/image%20%28178%29.png)

 실행중인 인스턴스라는 링크가 걸린 글자를 클릭하면 아래와 같이 나와요. 그런데 이렇게 생성된 인스턴스를 어떻게 실행할까요?  


![&#xB300;&#xC2DC;&#xBCF4;&#xB4DC;&#xC5D0; &#xC0DD;&#xC131;&#xB41C; &#xC778;&#xC2A4;&#xD134;&#xC2A4;](../../.gitbook/assets/image%20%28163%29.png)

그 것보다 먼저 노란 위 사진의 노란 부분을 잘 봐주세요. 우선 인스턴스 상태가 running인거 보이시조. 직감적으로 나의 서버가 돌아가고 있다는걸 어렴풋이 추측할 수 있을거에요.   
  
그리고 나머지 부분들 보시면   
  
- DNS : 내 서버의 도메인 네임이에요.  
- IPV4: 나의 공인 아이피에요. 즉 전세계 어디에서든 나의 IP에 접근할 수 있는 주소가 만들어진거에요.   


만약 우리가 웹 서버를 만든다고 가정하면 전세계 어디에서나 나우리의 웹서버를 볼 수 있다는 말이에요.   
   
만들었다고 끝은 아니조. 관리가 본격적인 일이에요.   
좌측 상단의  파란색 연결 버튼 보이나요. 클릭하세요.   


![&#xC778;&#xC2A4;&#xD134;&#xC2A4;&#xC5D0; &#xC5F0;&#xACB0;](../../.gitbook/assets/image%20%28181%29.png)

키 페어를 이용한 연결을 진행해볼게요. 기본적으로 알고 가야할게 권한 설정을 통해서 관리자만 아~~~까\(위에 올려조시면\) 생성한 키페어를 이용할 수 있어요.   
  
키 페어 권한 설정 들어가 볼게요.   


![&#xD0A4;&#xD398;&#xC5B4;&#xAC00; &#xC788;&#xB294; &#xB514;&#xB809;&#xD1A0;&#xB9AC;](../../.gitbook/assets/image%20%2878%29.png)

파일 제목은 신경 무시하세요.  step by step으로 가볼게요.   
 1. 파일 우클릭-&gt;속성-&gt; 보안탭 

![&#xD0A4;&#xD398;&#xC5B4; &#xC18D;&#xC131;&#xC758; &#xBCF4;&#xC548;&#xD0ED; ](../../.gitbook/assets/image%20%2837%29.png)

보안탭에서 사용 권한을 변경할 수 있어요.   
가장 간단한 방법이 관리자만 사용 할 수 있게 해주면 되요.   
2. \_\_고급버튼\_\_ 눌러주세요. 

![&#xC0C1;&#xC18D;&#xC0AC;&#xC6A9; &#xC548;&#xD568; &#xBC84;&#xD2BC; &#xD2C0;&#xB9AD;](../../.gitbook/assets/image%20%28101%29.png)

3. '상속 사용안함' 버튼 클릭.  
여기선 '상속사용'버튼이 떠 있는데 여러분은 '상속사용안함'이라고 떠 있을거에요. 그 버튼 눌러주세요. 

4. 팝업창이 뜨면 '상속된 사용 권한을 이 개체에 대한 명시적 사용 권한으로 변환합니다'라는 부분 클릭해주세요. 

![&#xC720;&#xC800;&#xB77C;&#xB294; &#xC774;&#xB984; &#xBD80;&#xBD84;&#xC740; &#xB2E4; &#xC81C;&#xAC70;&#xD568;](../../.gitbook/assets/image%20%28104%29.png)

5. 노란색 부분에 user라는 명칭이 있는데 해당 부분 클릭에서 아래의 제거 버튼을 클릭해서 제거해주세요.    
이 방법이 다른 계정 user는 사용 못하고 오직 관리자만 쓸수 있다는 말이에요.   
  
자! 이제 이 키페어를 이용해서 본격적으로 서버에 접근할 수 있는 상태가 일단락 되었네요.   
  
6. 명령프롬프트 관리자권한으로 실행 

![&#xAD00;&#xB9AC;&#xC790;&#xAD8C;&#xD55C;&#xC73C;&#xB85C; cmd&#xCC3D; &#xC2E4;&#xD589;](../../.gitbook/assets/image%20%2889%29.png)

\[단축키\]win+R -&gt; cmd입력 -&gt; ctrl+shift+enter\(관리자권한실행\)  
\[마우스\] cmd icon우클릭-&gt; 관리자 권한으로 실행   
  
7. 이전 인스턴스에 연결 했을때 뜬 팝업창을 기억하신다면\(스크롤 올려보세요\) \_\_예:\_\_ 라고 써져있고 명령어 엄청~ 긴거 보이조?  
그거 복사해서 프롬프트창에 실행시켜주세요.   
  
\#\#\# 주의!!   


![&#xC624;&#xB958;&#xBA54;&#xC2DC;&#xC9C0;](../../.gitbook/assets/image%20%2860%29.png)

당황하지 마세요. 이렇게 뜨는게 정상이에요. 왜냐하면 프롬프트창의 작업환경에는 키페어가 없는게 사실입니다. 그러면 어쩌라구요?   
  
방법1. 디렉토리 변경해서 다시 실행해준다.   
방법2. 환경변수에 등록해서 어디에서 실행해도 되도록한다.   
사실 방법2로 접근해서 실제 해보니 안되더군요. 해당 파일의 권한 설정부분을 변경해서 환경변수 등록으로는 안될것 같다는 느낌이 들었어요. 방법2는 pass 



CD 키페어 디렉토리주소 를 딱 입력하고 다시 영어 길게~써진 부분 복붙해주면 실행되는걸 볼 수 있어요. 

![AWS EC2 &#xC11C;&#xBC84; RUNNING](../../.gitbook/assets/image%20%28150%29.png)

그리고 만약 아래의 그림처럼 PERMISSION DENIED라고 뜨면 키페어 이름이 정확한지 한번 확인해주세요. \(혹여 키페어에 공백이 있을수 있으니 원래 키페어\(본인 컴퓨터의 파일\)에 공백있나 없나 확인 잘해보세요.\)  


혹은 키페어가 너무 공개적이라서 이용할수 없다는 말이 나올수 도 있습니다.\(권한 설정부분이 문제에요.\)  
 그러면 다시 제가 앞선 설명부분을 참고해서 차근차근 다시한번 해보실것을 권유드려요. 

![](../../.gitbook/assets/image%20%2894%29.png)



